# latexmk 配置文件
# 用于自动化编译 Beamer 演示文稿

# 使用 XeLaTeX 编译
$pdf_mode = 5;  # 5 = XeLaTeX
$postscript_mode = 0;
$dvi_mode = 0;

# XeLaTeX 编译命令
$xelatex = 'xelatex -shell-escape -interaction=nonstopmode -file-line-error -synctex=1 %O %S';

# BibTeX 设置（如果需要参考文献）
$bibtex_use = 2;

# 清理文件扩展名
$clean_ext = 'aux bbl blg idx ind lof lot out toc acn acr alg glg glo gls ist fls log fdb_latexmk synctex.gz nav snm vrb run.xml';

# 连续编译模式的预览设置
$preview_mode = 1;
$preview_continuous_mode = 1;

# PDF 查看器（根据操作系统自动选择）
if ($^O eq 'darwin') {
    # macOS
    $pdf_previewer = 'open -a Preview %S';
} elsif ($^O eq 'linux') {
    # Linux
    $pdf_previewer = 'xdg-open %S';
} else {
    # Windows
    $pdf_previewer = 'start %S';
}

# 自动更新 PDF 查看器
$pdf_update_method = 4;  # 4 = 自动更新
$pdf_update_signal = 'SIGHUP';

# 编译失败时继续
$force_mode = 0;

# 最大编译次数
$max_repeat = 5;
