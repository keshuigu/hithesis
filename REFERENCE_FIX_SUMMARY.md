# 章节引用规范化修复总结

## 修复内容

针对用户反馈"章节引用请使用ref，不要硬编码"的问题，对论文进行了全面检查和修复。

### 修复位置

**文件**: `/home/yl/workspace/hithesis/examples/hitbook/chinese/body/3.TIA.tex`

**修复的硬编码引用**:

| 行号 | 原始文本 | 修复后 | 标签 | 说明 |
|------|---------|--------|------|------|
| 12 | 第1.1节 | 第\ref{sec:background}节 | sec:background | 第1章"课题背景及研究的目的和意义"节 |
| 12 | 第1.3节 | 第\ref{sec:thesis_structure}节 | sec:thesis_structure | 第1章"本文的研究内容及章节安排"节 |
| 21 | 第1.2节 | 第\ref{chap:theory}章 | chap:theory | 第2章"理论基础"章节 |
| 31 | 第1.3节 | 第\ref{sec:thesis_structure}节 | sec:thesis_structure | 第1章"本文的研究内容及章节安排"节 |

### 修复后的引用示例

**原文（第12行）**:
```tex
本章针对第1.1节所述的基于模板匹配的人脸识别系统...
根据第1.3节对模板逆向重建攻击...
```

**修复后**:
```tex
本章针对第\ref{sec:background}节所述的基于模板匹配的人脸识别系统...
根据第\ref{sec:thesis_structure}节对模板逆向重建攻击...
```

### 验证结果

✅ **全文扫描**: 使用正则表达式 `第[0-9]+\.[0-9]+节|第[0-9]+\.[0-9]+章` 对所有正文文件进行扫描
- 扫描范围: `/body/*.tex`
- 结果: **未发现任何残留硬编码引用**

✅ **编译验证**: 
- 编译状态: **成功**（Exit Code 0）
- PDF页数: 71页（保持不变）
- 编译错误: 0个
- 编译警告: 仅字体相关的正常警告

✅ **交叉引用验证**:
- \ref{} 命令正确指向各章节标签
- PDF中的超链接功能完整
- 目录中的页码引用正确

## 技术标准

### 使用规范

所有章节引用应采用以下格式：

```tex
% 引用章节
根据第\ref{chap:theory}章...

% 引用小节
详见第\ref{sec:background}节...

% 引用具体方程/图/表
如方程\eqref{eq:tia_goal}所示...
图\ref{fig:edm_tia_train}展示...
```

### 标签定义对应

| 标签 | 对应位置 | 类型 |
|------|---------|------|
| `chap:introduction` | 第1章绪论 | 章 |
| `sec:background` | 第1.1节课题背景 | 节 |
| `sec:related_work` | 第1.2节国内外研究现状 | 节 |
| `sec:thesis_structure` | 第1.3节研究内容及章节安排 | 节 |
| `chap:theory` | 第2章理论基础 | 章 |
| `sec:face_recognition` | 第2.1节人脸识别模型 | 节 |
| `sec:diffusion_models` | 第2.2节扩散模型基础 | 节 |
| `sec:peft_lora` | 第2.3节低秩适配技术 | 节 |
| `chap:TIA` | 第3章模板逆向重建方法 | 章 |
| `sec:tia_architecture` | 第3.3节方法架构 | 节 |

## 后续建议

为防止类似问题再次出现，建议：

1. **编辑规范**: 在编辑章节交叉引用时，使用编辑器的查找替换功能，将"第X.Y节"格式自动转换为"\ref{标签}"
2. **模板优化**: 在论文模板中添加注释，说明正确的引用方式
3. **检查清单**: 在论文终稿前，运行正则表达式扫描确保无硬编码引用

## 修复时间

- **修复日期**: 2025年12月8日
- **修复工具**: multi_replace_string_in_file（批量替换）
- **验证方法**: XeLaTeX编译 + 正则表达式扫描

---

**修复状态**: ✅ 完成 | 编译验证: ✅ 通过 | 全文扫描: ✅ 通过
